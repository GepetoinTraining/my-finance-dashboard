// This is your Prisma schema file.
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider                    = "prisma-client-py"
  // This ensures the client is generated where the Python code can find it.
  // Vercel's build process will place it correctly.
  output                      = "../src/lib/prisma_client"
  recursive_type_depth        = -1
  enable_experimental_decimal = true
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Replicates your 'ingestion_logs' table
model IngestionLogs {
  id        Int      @id @default(autoincrement())
  job_id    String   @db.Uuid
  log_type  String   @db.VarChar(50)
  message   String   @db.Text
  timestamp DateTime @default(now()) @db.Timestamp(6)

  @@map("ingestion_logs")
}

// Replicates your 'bank_transactions' table
model BankTransactions {
  id               Int       @id @default(autoincrement())
  transaction_date DateTime? @db.Date
  posting_date     DateTime? @db.Date
  type             String    @db.VarChar(10)
  amount_decimal   Decimal   @db.Decimal(12, 2)
  raw_history_text String    @db.Text
  raw_value_text   String?   @db.Text
  raw_balance_text String?   @db.Text
  source_file_name String    @db.VarChar(255)
  raw_json_data    Json?     @db.Json
  created_at       DateTime  @default(now()) @db.Timestamp(6)

  @@map("bank_transactions")
}
